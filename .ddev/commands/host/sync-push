#!/bin/bash
set -e

# 1. Esporta il database (COMMENTATO PER TEST)
# echo "ğŸ“¦ Esportazione del database..."
ddev export-db --gzip=false --file=data_sync.sql

# 2. Operazioni Git
echo "ğŸš€ Preparazione push su Git..."
# git add data_sync.sql (COMMENTATO)
git add .

MSG=${1:-"Sync No-DB da $(hostname) - $(date +'%d/%m/%Y %H:%M')"}

echo "ğŸ“ Commit in corso..."
git commit -m "$MSG" || echo "âšª Nulla di nuovo da committare"

echo "ğŸ“¤ Upload su GitHub..."
git push

echo "âœ¨ Test No-DB completato!"

from django.core.management.base import BaseCommand
from shared.models import Mezzo


class Command(BaseCommand):
    help = 'Carica i mezzi nel database'

    def handle(self, *args, **options):
        dati = """
        A/AER (AUTOMEZZO SOCCORSO AEROPORTUALE)
        A/BUS (AUTOBUS)
        A/SP (AUTOMEZZO SPAZZATRICE)
        A/TRID (AUTOMEZZO TRIDIMENSIONALE)
        A/TT (AUTOMEZZO TRATTRICE PER SEMIRIMORCHIO)
        AA (AUTOMEZZO ANFIBIO)
        AB (AUTOBOTTE)
        AB/CAR (AUTOBOTTE CARBURANTE)
        AB/GPL (AUTOBOTTE PER TRASPORTO GPL)
        ABP (AUTOBOTTEPOMPA)
        ABP/AER (AUTOBOTTEPOMPA SERVIZIO AEROPORTUALE)
        ABP/SC (AUTOBOTTEPOMPA ATTREZZATA SCARRABILE)
        ACT (AUTOCARRO TRASPORTO)
        ACT/ATTR (AUTOCARRO SERVIZI ISTITUTO)
        ACT/BOSC (AUTOCARRO INCENDI BOSCHIVI)
        ACT/CC (AUTOCARRO CROLLI)
        ACT/CO2 (AUTOCARRO CON APPARECCHIATURA CO2)
        ACT/EL (AUTOCARRO SERVIZI ELETTRICI)
        ACT/FURG.SC (AUTOCARRO FURGANATO SCARRABILE)
        ACT/GRU (AUTOCARRO GRU)
        ACT/IDR (AUTOCARRO SERVIZI IDRICI)
        ACT/IG (AUTOCARRO SERVIZI IGIENICI)
        ACT/ILL (AUTOCARRO ILLUMINAZIONE)
        ACT/ILL MG (AUTOCARRO ILLUM. MAGAZZINO GENERATORE)
        ACT/ILL TF (AUTOCARRO ILLUMINAZIONE TORRE FARI)
        ACT/INC (AUTOMEZZO RECUPERO VEICOLI INCIDENTATI)
        ACT/LU (AUTOCARRO LUCE - GRUPPO ELETTROGENO)
        ACT/MEN (AUTOCARRO SERVIZI MENSA)
        ACT/NBC (AUTOCARRO PER DECON. NUCL. BATTER. CHIM.)
        ACT/NBCR (AUTOCARRO DECON. NUCL.BATTER.CHIM.RAD.)
        ACT/NUC (AUTOCARRO EMERGENZA NUCLEARE)
        ACT/OP (AUTOCARRO SEZIONE OPERATIVA)
        ACT/RIB (AUTOCARRO CASSONE RIBALTABILE)
        ACT/RU (AUTOCARRO TRASPORTO RU)
        ACT/SC (AUTOCARRO SCARRABILE)
        ACT/SCH-CO2 (AUTOCARRO CON SCHIUMOGENO CO2)
        ACT/SMM (AUTOCARRO SATELLITARE MOBILE)
        ACT/TEN (AUTOCARRO TENDE E CASERMAGGIO)
        ACT/TRI (AUTOCARRO CASSONE TRIRIBALTABILE)
        ACT/UFF (AUTOCARRO UFFICIO)
        AF (AUTOFURGONE CARROZ. CHIUSA)
        AF/AER (AUTOFURGONE SOCCORSO AEREOPORTUALE)
        AF/BOSC (AUTOFURGONE INCENDI BOSCHIVI)
        AF/C (AUTOFURGONE COMBINATO)
        AF/CC (AUTOFURGONE CARRO COMANDO COL. MOB.)
        AF/CO (AUTOFURGONE COMANDO)
        AF/COMBI (AUTOFURGONE COMBI)
        AF/EL (AUTOFURGONE SERVIZI ELETTRICI)
        AF/IDR (AUTOFURGONE SERVIZI IDRICI COL. MOB.)
        AF/MEN (AUTOFURGONE MENSA)
        AF/NBC (AUTOFURGONE PER DECON. NUCL.BATTER.CHIM.)
        AF/NBCR (AUTOFURGONE DECON. NUCL.BATTER.CHIM.RAD.)
        AF/NR (AUTOFURGONE PER NUCLEO RADIOATTIVITA’’)
        AF/NUC (AUTOFURGONE LABORATORIO NUCLEARE)
        AF/OFF (AUTOFURGONE OFFICINA)
        AF/OP (AUTOFURGONE OPERATIVO COL. MOB.)
        AF/P.RAD (AUTOFURGONE PONTE RADIO MOBILE)
        AF/POL (AUTOFURGONE POLISOCCORSO)
        AF/RAD (AUTOFURGONE RADIO)
        AF/RIS (AUTOFURGONE RISTORO COL. MOB.)
        AF/SAF (AUTOFURGONE SPELEO ALPINO FLUVIALE)
        AF/SAR (AUTOFURGONE SOCCORSO ACCESSIBILITA’’ RID.)
        AF/SC (AUTOFURGONE SCORTA)
        AF/SMZT (AUTOFURGONE PER NUCLEO SOMMOZZATORI)
        AF/SOMM (AUTOFURGONE PER NUCLEO SOMMOZZATORI)
        AF/TRID (AUTOFURGONE TRIDIMENSIONALE)
        AF/TV (AUTOFURGONE PER RIPRESE TV)
        AF/UCL (AUTOFURGONE UNITA’’ CRISI LOCALE)
        AG (AUTOGRU)
        AIS (AUTOIDROSCHIUMA)
        AIS/PB (AUTOIDROSCHIUMA PELINI BARIBBI)
        AISP (AUTOIDROSCHIUMA POLVERE)
        AL (AUTOLETTIGA)
        AP (AUTOPOMPA SENZA SERBATOIO)
        AP/S.I.EL (AUTOPOMPA SENZA SERB SERV IDR.)
        APL (AUTOPOMPA LAGUNARE (B’)
        APL/G (AUTOPOMPA LAGUNARE GRANDE (B’)
        APL/M (AUTOPOMPA LAGUNARE MEDIA (B’)
        APL/P (AUTOPOMPA LAGUNARE PICCOLA (B’)
        APR Drone
        APR Drone DJI F550
        APR Drone DJI Inspire 1
        APR Drone DJI Inspire 2
        APR Drone DJI Phantom
        APR Drone DJI S800 Evo
        APR Drone F.I.D. Quadricottero
        APR Drone Parrot Bebop2
        APR Drone Sensefly Ebee
        APS (AUTOPOMPA SERBATOIO)
        APS/3P (AUTOPOMPA SERBATOIO 3 POSTI)
        APS/P (AUTOPOMPA SERBATOIO PICCOLA)
        APS/SR (AUTOPOMPA SERB. STRADA ROTAIA (BIMODALE))
        APS/TRID (AUTOPOMPA SERBATOIO TRIDIMENSIONALE)
        ARI (AUTOMEZZO RAPIDO INTERV. AEROPORTUALE)
        AS (AUTOSCALA)
        AS/M (AUTOSCALA CON VOLATA MANUALE)
        ASA (AUTOMEZZO SOCCORSO AEROPORTUALE)
        ATOM (ATOMIZZATORE)
        AV (AUTOVETTURA)
        AV/9 (AUTOVETTURA CON 9 POSTI)
        AV/AFF. ALVAR (AUTOVETTURA AFFITATA ARVAL)
        AV/FS (AUTOVETTURA FUORISTRADA)
        AV/NOLEGGIO (AUTOVETTURA NOLEGGIATA)
        AVP (AUTOVETTURA POMPA)
        BA (BARCA (B’)
        BA/JET (BARCA CON MOTORE IDROJET (B’)
        BP (BATTELLO PNEUMATICO (P’)
        BP/EB (BATTELLO PNEUMATICO ENTRO BORDO (B’)
        BUS G (AUTOBUS GRANDE  (OLTRE 20 POSTI))
        BUS M (AUTOBUS MEDIO (FINO A 20 POSTI))
        BUS P (AUTOBUS PICCOLO (FINO A 9 POSTI))
        BUS/AL (AUTOBUS TRASFORMATO IN AUTOLETTIGA)
        C/NBCR (CARRELLO CON IDROPULITRICE)
        CA (CAMPAGNOLA)
        CA/ESK (CAMPAGNOLA CON MODULO ESK)
        CA/ESK 400 (CAMPAGNOLA CON MODULO ESK 400)
        CA/ESK 600 (CAMPAGNOLA CON MODULO ESK 600)
        CA/FO (CAMPAGNOLA  CON FOTOELETTRICA)
        CA/GRU (CAMPAGNOLA CON GRUETTA)
        CA/MONTES (CAMPAGNOLA FUORISTRADA (9 POSTI))
        CA/NUC (CAMPAGNOLA ATTREZZATA NUCLEARE)
        CA/PU (CAMPAGNOLA PICK-UP)
        CA/RIA (CAMPAGNOLA RAPIDO INTERV. AEROPORTUALE)
        CA/SMZT (CAMPAGNOLA PER NUCLEO SOMMOZZATORI)
        Carro Schiuma
        CC/CARB (CISTERNA TRASPORTO CARBURANTI)
        CE (CARRELLO ELEVATORE)
        CEI (CESOIE IDRAULICHE)
        CEL (CARRELLO ELEVATORE)
        CL 415 Canadair
        DEC (DECESPUGLIATORE)
        ELI (ELICOTTERO)
        ES/MINI (MINI ESCAVATORE)
        ESC (ESCAVATORE CINGOLATO)
        ESG (ESCAVATORE GOMMATO)
        FB (FUORIBORDO)
        FE (FOTOELETTRICA)
        FRS/NEVE (FRESA DA NEVE)
        FS (FS)
        FS/NEVE (YETI E PRINOTH PER ZONE INNEVATE - GATTO DELLE NEVI)
        GE (GRUPPO ELETTROGENO)
        GE/B (GRUPPO ELETTROGENO BARELLABILE)
        GF/B (GRUPPO FARI BARELLABILE)
        GID/B (GRUPPO IDRAULICO BARELLABILE)
        GOMMONE RAFTING
        HOVERCRAFT (HOVERCRAFT (B’)
        IAL (IMBARCAZIONE ALLUVIONALE LEGGERA (B’)
        IDRO (IDROPULITRICE GENERICA)
        IDRO/RIS (IDROPULITRICE RISCALDATA)
        LUF (SISTEMA MOBILE DI SUPPORTO ANTINCENDIO)
        MBP/G (MOTOBARCA POMPA GRANDE)
        MBP/M (MOTOBARCA POMPA MEDIA)
        MBP/P (MOTOBARCA POMPA PICCOLA)
        MBP/RAFF (MOTOBARCA POMPA RAFF)
        MD (MOTO DISCO)
        MD/B (MOTODIVARICATORE BARELLABILE)
        MDA (MOTO D’’ACQUA (B’)
        MDEM (MOTODEMOLITORI)
        MES (MINIESCAVATORE)
        MF (MOTOFARO)
        MNP (MOTONAVE POMPA)
        MO (MOTOCICLETTA (M’)
        MOD/BOSC SC (MODULO INCENDI BOSCHIVI SCARRABILE)
        MOS (MOS MACCHINA OPERATRICE SEMOVENTE)
        MP/B-INC (MOTOPOMPA BARELLABILE DA INCENDIO)
        MP/ESA-RI (MOTOPOMPA ESAURIMENTO SU RIMORCHIO)
        MP/RI (MOTOPOMPA INCENDIO SU RIMORCHIO)
        MPC (MINIPALA CINGOLATA)
        MPG (MINIPALA GOMMATA)
        MS (MOTOSCAFO (B’)
        MSG (MOTOSEGA)
        MT (MOVIMENTATORE TELESCOPICO)
        MTC (MOTOCARRELLO)
        MTS (MOTOSLITTA)
        MTT (MOTOTRONCATRICE)
        MUL (MULETTO - CARRELLO ELEVATORE)
        MV/B (MOTOVENTILATORE BARELLABILE)
        MV/RIS (MOTOVENTILATORE RISCALDATORE)
        P/B-ESA (MOTOPOMPA BARELLABILE DA ESAURIMENTO)
        POM/IMM (POMPA AD IMMERSIONE)
        PTR (PIATTAFORMA TELESCOPICA RAGNO)
        PTTF (PIATTAFORMA)
        QUA (QUADRICICLO (M’)
        QUAD (QUADRICICLO)
        RAS (RASAERBA)
        RI (RIMORCHIO PER USI VARI)
        RI/BA (RIMORCHIO PER BARCA)
        RI/BP (RIMORCHIO PER BP)
        RI/CANN (RIMORCHIO PER CANNONE LANCIA)
        RI/CING (RIMORCHIO GIRINO PER CINGOLATI)
        RI/CONT.CU (RIMORCHIO CONTAINERS CUCINA)
        RI/CONT.IG (RIMORCHIO CONTAINERS SERVIZI IGIENICI)
        RI/CU (RIMORCHIO CU)
        RI/CU G (RIMORCHIO CUCINA GRANDE (800 RAZIONI))
        RI/CU M (RIMORCHIO CUCINA MEDIA (300 RAZIONI))
        RI/CU P (RIMORCHIO CUCINA PICCOLA (200 RAZIONI))
        RI/ELI (RIMORCHIO BIGA PER ELICOTTERI)
        RI/ESK (RIMORCHIO CON MODULO ESK)
        RI/ESK 400 (RIMORCHIO CON MODULO ESK 400)
        RI/ESK 600 (RIMORCHIO CON MODULO ESK 600)
        RI/FO (RIMORCHIO PER FOTOELETTRICA)
        RI/FS (RIMORCHIO PER TERRENI INNEVATI)
        RI/FSN (RIMORCHIO PER MEZZI DA NEVE)
        RI/GR.E (RIMORCHIO PER GRUPPO ELETTROGENO)
        RI/MA.O (RIMORCHIO TRASPORTO MACC. OPER.)
        RI/MCP (RIMORCHIO CON MOTOCOMPRESSORE)
        RI/MDA (RIMORCHIO PER TRASPORTO MOTO D’’ACQUA)
        RI/MO.ACQ. (RIMORCHIO PER MOTO D’’ACQUA)
        RI/MP (RIMORCHIO PER MOTOPOMPA)
        RI/MTS (RIMORCHIO PER MOTOSLITTA)
        RI/NBCR (RIMORCHIO DECON. NUCL.BATTER.CHIM.RAD.)
        RI/PR (RIMORCHIO TRASPORTO PONTE RADIO)
        RI/QUAD (RIMORCHIO TRASPORTO QUADRICICLO)
        RI/S (SCALA AEREA RIMORCHIABILE)
        RI/SCH (RIMORCHIO PER SCHIUMOGENO)
        RI/TO.FA. (RIMORCHIO TORRE FARI)
        RI/VEIC (RIMORCHIO TRASPORTO VEICOLI)
        RIB/G (RIGID INFLATABLE BOAT GRANDE)
        RIB/P (RIGID INFLATABLE BOAT PICCOLO)
        ROUL (ROULOTTE)
        SBVAD (SERBATOIO BENZINA VERDE ATT. DIDATTICA)
        SGAD (SERBATOIO GASOLIO ATT. DIDATTICA)
        SHELTER (CONTAINER SHELTER)
        SOFF (SOFFIATORI PER RISCALDAMENTO NELLE TENDE)
        SPAZZ (SPAZZATRICE)
        SR (SR)
        SR/CIS (SEMIRIMORCHIO CISTERNATO)
        SR/CON (SEMIRIMORCHIO TRASPORTO CONTAINERS)
        SR/CP (SEMIRIMORCHIO TRASPORTO CASETTE PIEGH.)
        SR/CU G (SEMIRIMORCHIO CUCINA DA CAMPO 250 PASTI)
        SR/CU P (SEMIRIMORCHIO CUCINA DA CAMPO 150 PASTI)
        SR/ES (SEMIRIMORCHIO TRASPORTO ESCAVATORE)
        SR/FUR (SEMIRIMORCHIO FURGONATO)
        SR/MA.O (SEMIRIMORCHIO TRASP. MACC. OPER.)
        SR/REV (SEMIRIMORCHIO REVISIONE VEICOLI)
        SR/TC (SEMIRIMORCHIO TRASP. TRATT. CARIC. CING.)
        SR/TCG (SEMIRIMORCHIO TRASP. TRATT. CARIC. GOM.)
        TA (TRATTORE APRIPISTA)
        TCC (TRATTORE CARICATORE CINGOLATO)
        TCE/G (TERNA CARICATORE ESCAVATORE GOMMATO)
        TCG (TRATTORE CARICATORE GOMMATO)
        TER (TERNA)
        TNKADB (TANICA ADBLUE)
        TNKDA (TANICA DIESEL AUTOTRAZIONE)
        TNKDN (TANICA DIESEL NAUTICO)
        TNKJ (TANICA AVIO)
        TNKK (TANICA KEROSENE)
        TNKM (TANICA MISCELA)
        TNKV (TANICA BENZINA VERDE)
        TS (TAGLIASIEPI)
        TT/AGR (TRATTRICE AGRICOLA)
        ZA (ZATTERA (B’)
        """

        righe = dati.strip().split('\n')
        count = 0

        for riga in righe:
            riga = riga.strip()
            if not riga:
                continue

            # Gestione righe con parentesi: A/BUS (AUTOBUS)
            if "(" in riga:
                parti = riga.split('(', 1)
                sigla_mezzo = parti[0].strip()
                nome_mezzo = parti[1].replace(')', '').strip()
            # Gestione righe senza parentesi: APR Drone
            else:
                parti = riga.split(' ', 1)  # Dividi al primo spazio
                sigla_mezzo = parti[0].strip()
                nome_mezzo = parti[1].strip() if len(
                    parti) > 1 else sigla_mezzo

            # IL SALVATAGGIO DEVE ESSERE DENTRO IL CICLO (INDENTATO)
            obj, created = Mezzo.objects.get_or_create(
                sigla=sigla_mezzo,
                defaults={'nome': nome_mezzo}
            )
            if created:
                count += 1

        self.stdout.write(
            f"Caricamento completato! Aggiunti {count} nuovi mezzi.")
